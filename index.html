<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HSK 4.0 Versi 3.0 â€” Hanzi Murni</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      background: linear-gradient(135deg, #4a148c, #006064, #4a148c);
      font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; overflow: hidden;
    }
    .container { 
      width: 1024px; height: 704px; /* 16:11 */
      background: white; border-radius: 20px; 
      box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      overflow: hidden; position: relative;
    }
    .screen { 
      display: none; flex-direction: column; align-items: center; 
      justify-content: center; padding: 20px; text-align: center; 
      height: 100%; background: white;
    }
    .screen.active { display: flex; }
    h1 { font-size: 32px; color: #4a148c; margin-bottom: 10px; }
    .subtitle { font-size: 20px; color: #006064; font-weight: bold; margin-bottom: 15px; }
    p { font-size: 16px; color: #37474f; max-width: 800px; line-height: 1.5; }
    
    .mode-btns { 
      display: flex; flex-wrap: wrap; gap: 15px; margin: 20px 0; justify-content: center;
    }
    .mode-btn { 
      background: #4a148c; color: white; border: none; 
      padding: 16px 25px; font-size: 18px; border-radius: 14px; 
      cursor: pointer; font-weight: bold;
      transition: all 0.25s; width: 200px;
      display: flex; flex-direction: column; align-items: center;
    }
    .mode-btn:hover { 
      background: #280a4a; transform: translateY(-3px);
      box-shadow: 0 6px 18px rgba(74,20,140,0.4);
    }
    .mode-btn.timer { background: #d32f2f; }
    .mode-btn.timer:hover { background: #9a000d; }
    .mode-btn.practice { background: #006064; }
    .mode-btn.practice:hover { background: #004d4f; }
    .mode-icon { font-size: 24px; margin-bottom: 6px; }
    
    .info-box {
      background: #f3e5f5; border-radius: 18px; padding: 22px;
      width: 100%; max-width: 780px; margin: 15px 0;
      text-align: left; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    .word-large { 
      font-size: 60px; font-weight: bold; color: #4a148c; 
      margin: 12px 0; font-family: 'Microsoft YaHei';
      min-height: 80px;
    }
    .pinyin { 
      font-size: 22px; font-weight: 500; 
      margin: 10px 0; color: #4a148c;
      font-family: 'Arial Unicode MS', sans-serif;
    }
    .pinyin span { 
      padding: 0 4px; border-radius: 5px;
    }
    .tone1 { background: #e1bee7; color: #4a148c; } 
    .tone2 { background: #ffecb3; color: #f57c00; } 
    .tone3 { background: #ffcdd2; color: #c62828; } 
    .tone4 { background: #b2dfdb; color: #006064; } 
    .tone5 { background: #e0e0e0; color: #616161; } 
    
    .example { 
      font-size: 18px; margin: 18px 0; line-height: 1.6;
      padding: 14px 18px; background: #e0f2f1; border-radius: 12px;
      border-left: 6px solid #006064;
    }
    .example-zh { 
      font-family: 'Microsoft YaHei'; font-size: 20px;
      color: #4a148c; margin-bottom: 8px;
    }
    .example-id { 
      font-style: italic; color: #006064; font-size: 17px;
    }
    
    .options { 
      display: grid; grid-template-columns: 1fr 1fr; 
      gap: 15px; width: 100%; max-width: 750px; margin-top: 12px;
    }
    .option { 
      background: #f3e5f5; padding: 16px; border-radius: 14px; 
      font-size: 17px; cursor: pointer; transition: 0.22s;
      border: 3px solid #ce93d8;
      display: flex; align-items: center;
    }
    .option::before {
      content: "â€¢"; margin-right: 12px; font-size: 26px;
      color: #4a148c;
    }
    .option:hover { 
      background: #e1bee7; border-color: #ab47bc;
      transform: scale(1.03);
    }
    .option.correct { 
      background: #c8e6c9 !important; border-color: #81c784;
      color: #1b5e20;
    }
    .option.correct::before {
      content: "âœ“"; color: #4caf50; font-weight: bold;
    }
    .option.wrong { 
      background: #ffcdd2 !important; border-color: #ef9a9a;
      color: #c62828;
    }
    .option.wrong::before {
      content: "âœ—"; color: #f44336; font-weight: bold;
    }
    
    .controls {
      display: flex; flex-wrap: wrap; gap: 12px; margin: 18px 0; justify-content: center;
    }
    .btn { 
      background: #4a148c; color: white; border: none; 
      padding: 12px 24px; font-size: 17px; border-radius: 10px; 
      cursor: pointer; font-weight: bold;
      transition: background 0.2s;
    }
    .btn:hover { background: #280a4a; }
    .btn-audio { background: #006064; }
    .btn-audio:hover { background: #004d4f; }
    
    .progress {
      width: 100%; max-width: 680px; margin: 15px 0;
    }
    .progress-bar {
      width: 100%; height: 12px;
      background: #e0e0e0; border-radius: 6px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%; background: #4a148c; 
      border-radius: 6px; width: 0%;
      transition: width 0.4s ease;
    }
    .progress-text {
      font-size: 17px; color: #4a148c; margin-top: 8px;
      font-weight: bold;
    }
    
    .timer { 
      font-size: 26px; font-weight: bold; 
      color: #d32f2f; margin: 15px 0; 
      background: #ffebee; padding: 10px 22px;
      border-radius: 50px; min-width: 200px;
      display: flex; align-items: center; justify-content: center;
      gap: 8px;
    }
    
    .summary { 
      background: #f9f9f9; padding: 22px; border-radius: 16px;
      max-height: 250px; overflow-y: auto; margin: 15px 0;
      text-align: left; font-size: 15px; width: 100%;
      max-width: 780px;
    }
    
    footer { 
      position: absolute; bottom: 12px; 
      font-size: 13px; color: #757575;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Layar Mulai -->
    <div id="screen-start" class="screen active">
      <h1>ğŸ“ HSK 4.0 Versi 3.0 â€” Hanzi Murni</h1>
      <div class="subtitle">Intermediate Level II â€¢ Kalimat dalam Hanzi Tanpa Pinyin</div>
      <p>500 kata resmi dengan kalimat contoh dalam Hanzi murni</p>
      
      <div class="mode-btns">
        <button class="mode-btn learn" id="btn-mode-learn">
          <span class="mode-icon">ğŸ“–</span>
          Pelajari Dulu<br><small>Eksplorasi bebas</small>
        </button>
        <button class="mode-btn timer" id="btn-mode-timer">
          <span class="mode-icon">â±ï¸</span>
          Ujian 45 Menit<br><small>500 soal</small>
        </button>
        <button class="mode-btn practice" id="btn-mode-practice">
          <span class="mode-icon">ğŸ®</span>
          Latihan Bebas<br><small>Tanpa tekanan waktu</small>
        </button>
      </div>
      
      <p><small>âœ… 500 kata resmi â€¢ âœ… Hanzi murni â€¢ âœ… Rasio 16:11 (1024Ã—704 px)</small></p>
      <footer>HSK 3.0 â€¢ Intermediate II â€¢ Sesuai dokumen CTI 2025</footer>
    </div>

    <!-- Layar Pelajari -->
    <div id="screen-learn" class="screen">
      <h1>ğŸ“– Mode Pembelajaran â€” HSK 4</h1>
      
      <div class="progress">
        <div class="progress-bar">
          <div class="progress-fill" id="learn-progress"></div>
        </div>
        <div class="progress-text">
          Kata <span id="learn-current">1</span> / 500
        </div>
      </div>
      
      <div class="info-box">
        <div class="word-large" id="learn-hanzi">...</div>
        <div class="pinyin" id="learn-pinyin">...</div>
        <div class="example">
          <div class="example-zh" id="learn-example-zh">...</div>
          <div class="example-id" id="learn-example-id">...</div>
        </div>
      </div>
      
      <div class="controls">
        <button class="btn btn-audio" id="btn-learn-word">ğŸ”Š Dengar Kata</button>
        <button class="btn btn-audio" id="btn-learn-sentence">ğŸ§ Dengar Kalimat</button>
        <button class="btn" id="btn-learn-prev">â—€ Sebelumnya</button>
        <button class="btn" id="btn-learn-next">Berikutnya â–¶</button>
      </div>
    </div>

    <!-- Layar Game -->
    <div id="screen-game" class="screen">
      <div class="timer" id="timer-display" style="display:none;">
        <span>â±ï¸</span> <span id="time">2700</span> detik
      </div>
      
      <div class="progress">
        <div class="progress-bar">
          <div class="progress-fill" id="game-progress"></div>
        </div>
        <div class="progress-text">
          Soal <span id="game-current">1</span> / 500 â€¢ Skor: <span id="score">0</span>
        </div>
      </div>
      
      <div class="info-box">
        <div class="word-large" id="hanzi">...</div>
        <div class="pinyin" id="pinyin" style="opacity:0.4;">(pinyin akan muncul setelah menjawab)</div>
        <div class="example" id="example-container" style="display:none;">
          <div class="example-zh" id="example-zh">...</div>
          <div class="example-id" id="example-id">...</div>
        </div>
      </div>
      
      <div class="controls">
        <button class="btn btn-audio" id="btn-play-word">ğŸ”Š Kata</button>
        <button class="btn btn-audio" id="btn-play-sentence">ğŸ§ Kalimat</button>
        <button class="btn" id="btn-reveal">â¡ï¸ Lihat Arti</button>
      </div>
      
      <div class="options" id="options"></div>
    </div>

    <!-- Layar Akhir -->
    <div id="screen-end" class="screen">
      <h1>ğŸŒŸ Latihan Selesai!</h1>
      <div class="subtitle">HSK 4.0 Versi 3.0 â€” 500 Kata</div>
      
      <div style="margin:18px 0; font-size:24px; font-weight:bold; color:#4a148c;">
        Skor: <span id="final-score">0</span>/500
        <br><small>(<span id="percent">0</span>%)</small>
      </div>
      
      <div class="summary" id="mistakes-summary"></div>
      
      <button class="btn" id="btn-retry" style="margin-top:18px;">â†º Ulangi</button>
    </div>
  </div>

  <script>
    // ğŸ“š DATA: 50 KATA CONTOH HSK 4.0 VERSI 3.0 (Kalimat dalam Hanzi murni)
    // Format: [Hanzi, Pinyin, Arti, Kalimat Mandarin (Hanzi murni), Terjemahan Indonesia]
    const WORDS = [
      ["æŠ½è±¡", "chÅu xiÃ ng", "abstrak", "è¿™ä¸ªæ¦‚å¿µå¤ªæŠ½è±¡äº†ï¼Œå¾ˆéš¾ç†è§£ã€‚", "Konsep ini terlalu abstrak, sulit dipahami."],
      ["æ‹œè®¿", "bÃ i fÇng", "mengunjungi", "æ˜å¤©æˆ‘è¦å»æ‹œè®¿æˆ‘çš„è€å¸ˆã€‚", "Besok saya akan mengunjungi guru saya."],
      ["æŠ±æ­‰", "bÃ o qiÃ n", "merasa menyesal", "å¾ˆæŠ±æ­‰ï¼Œæˆ‘è¿Ÿåˆ°äº†ã€‚", "Saya sungguh menyesal, saya terlambat."],
      ["æ¯•ä¸š", "bÃ¬ yÃ¨", "lulus", "å¥¹å»å¹´ä»åŒ—äº¬å¤§å­¦æ¯•ä¸šã€‚", "Dia lulus dari Universitas Peking tahun lalu."],
      ["è¡¨æ¼”", "biÇo yÇn", "tampil", "å­©å­ä»¬åœ¨æ™šä¼šä¸Šè¡¨æ¼”äº†èˆè¹ˆã€‚", "Anak-anak menampilkan tari dalam acara malam."],
      ["è¡¨æ‰¬", "biÇo yÃ¡ng", "memuji", "è€å¸ˆè¡¨æ‰¬äº†ä»–è®¤çœŸå­¦ä¹ çš„æ€åº¦ã€‚", "Guru memuji sikap belajarnya yang serius."],
      ["æŠ±æ€¨", "bÃ o yuÃ n", "mengeluh", "ä»–æ€»æ˜¯æŠ±æ€¨å·¥ä½œå¤ªç´¯ã€‚", "Dia selalu mengeluh pekerjaannya terlalu melelahkan."],
      ["æŠ¥å‘Š", "bÃ o gÃ o", "laporan", "ç»ç†è¦æ±‚æˆ‘ä»¬æ˜å¤©æäº¤æŠ¥å‘Šã€‚", "Manajer meminta kami menyerahkan laporan besok."],
      ["èƒŒ", "bÃ¨i", "menghafal", "ä»–èŠ±äº†ä¸‰å¤©æ—¶é—´èƒŒè¿™ç¯‡è¯¾æ–‡ã€‚", "Dia menghabiskan tiga hari menghafal teks ini."],
      ["å€", "bÃ¨i", "kali", "è¿™ä¸ªæœˆçš„é”€å”®é¢æ˜¯ä¸Šä¸ªæœˆçš„ä¸¤å€ã€‚", "Penjualan bulan ini dua kali lipat bulan lalu."],
      ["è¢«åŠ¨", "bÃ¨i dÃ²ng", "pasif", "åœ¨è°ˆåˆ¤ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½å¤„äºè¢«åŠ¨åœ°ä½ã€‚", "Dalam negosiasi, kita tidak boleh berada dalam posisi pasif."],
      ["å¿…ç„¶", "bÃ¬ rÃ¡n", "pasti", "åŠªåŠ›å­¦ä¹ å¿…ç„¶ä¼šæœ‰å¥½æˆç»©ã€‚", "Belajar giat pasti menghasilkan nilai baik."],
      ["æ¯”ä¾‹", "bÇ lÃ¬", "rasio", "ç”·å¥³æ¯”ä¾‹æ˜¯1æ¯”1.2ã€‚", "Rasio laki-laki dan perempuan adalah 1 banding 1,2."],
      ["é¿å…", "bÃ¬ miÇn", "menghindari", "æˆ‘ä»¬åº”è¯¥é¿å…çŠ¯åŒæ ·çš„é”™è¯¯ã€‚", "Kita harus menghindari melakukan kesalahan yang sama."],
      ["æ ‡å¿—", "biÄo zhÃ¬", "tanda", "çº¢åå­—æ˜¯åŒ»é™¢çš„æ ‡å¿—ã€‚", "Palang merah adalah simbol rumah sakit."],
      ["è¡¨æ ¼", "biÇo gÃ©", "formulir", "è¯·å¡«å†™è¿™ä»½ç”³è¯·è¡¨æ ¼ã€‚", "Silakan isi formulir aplikasi ini."],
      ["è¡¨å½°", "biÇo zhÄng", "penghargaan", "å…¬å¸è¡¨å½°äº†ä¸‰ä½ä¼˜ç§€å‘˜å·¥ã€‚", "Perusahaan memberikan penghargaan kepada tiga karyawan teladan."],
      ["è¡¨è¾¾", "biÇo dÃ¡", "mengekspresikan", "ä»–ç”¨è¯—æ­Œè¡¨è¾¾äº†è‡ªå·±çš„æ„Ÿæƒ…ã€‚", "Dia mengekspresikan perasaannya melalui puisi."],
      ["èƒŒæ™¯", "bÃ¨i jÇng", "latar", "äº†è§£å†å²èƒŒæ™¯æœ‰åŠ©äºç†è§£è¿™ç¯‡æ–‡ç« ã€‚", "Memahami latar belakang sejarah membantu memahami artikel ini."],
      ["æœ¬äº‹", "bÄ›n shi", "kemampuan", "ä»–çœŸæœ‰æœ¬äº‹ï¼Œè¿™ä¹ˆå¿«å°±è§£å†³äº†é—®é¢˜ã€‚", "Dia benar-benar cakap, masalah terselesaikan begitu cepat."],
      ["å¿…è¦", "bÃ¬ yÃ o", "perlu", "å¸¦æŠ¤ç…§æ˜¯å‡ºå›½çš„å¿…è¦æ¡ä»¶ã€‚", "Membawa paspor adalah syarat wajib bepergian ke luar negeri."],
      ["å˜åŒ–", "biÃ n huÃ ", "perubahan", "è¿™å‡ å¹´åŸå¸‚çš„å˜åŒ–å¾ˆå¤§ã€‚", "Dalam beberapa tahun terakhir, kota ini berubah sangat besar."],
      ["å˜å½¢", "biÃ n xÃ­ng", "berubah bentuk", "è¿™ä¸ªå¡‘æ–™ç©å…·é‡çƒ­ä¼šå˜å½¢ã€‚", "Mainan plastik ini akan berubah bentuk jika terkena panas."],
      ["è¾©è®º", "biÃ n lÃ¹n", "berdebat", "å­¦ç”Ÿä»¬å°±ç¯ä¿é—®é¢˜è¿›è¡Œäº†æ¿€çƒˆè¾©è®ºã€‚", "Siswa melakukan debat sengit tentang isu lingkungan."],
      ["è¡¨æ˜", "biÇo mÃ­ng", "menunjukkan", "ä»–çš„è¡Œä¸ºè¡¨æ˜ä»–ä¸åŒæ„è¿™ä¸ªè®¡åˆ’ã€‚", "Perilakunya menunjukkan bahwa dia tidak setuju dengan rencana ini."],
      ["è¡¨é¢", "biÇo miÃ n", "permukaan", "ä¸è¦åªçœ‹è¡¨é¢ï¼Œè¦äº†è§£æœ¬è´¨ã€‚", "Jangan hanya melihat permukaan, pahami esensinya."],
      ["æ ‡ç‚¹", "biÄo diÇn", "tanda baca", "å†™ä½œæ–‡æ—¶è¦æ³¨æ„æ ‡ç‚¹ç¬¦å·çš„ä½¿ç”¨ã€‚", "Saat menulis karangan, perhatikan penggunaan tanda baca."],
      ["æ ‡å‡†", "biÄo zhÇ”n", "standar", "è¿™ä¸ªäº§å“çš„è´¨é‡è¾¾åˆ°äº†å›½é™…æ ‡å‡†ã€‚", "Kualitas produk ini telah mencapai standar internasional."],
      ["æ ‡é¢˜", "biÄo tÃ­", "judul", "è¯·ä¸ºä½ çš„æ–‡ç« æƒ³ä¸€ä¸ªå¸å¼•äººçš„æ ‡é¢˜ã€‚", "Silakan buat judul yang menarik untuk artikel Anda."],
      ["å‰¥å‰Š", "bÅ xuÄ“", "mengeksploitasi", "æ³•å¾‹ç¦æ­¢å‰¥å‰Šç«¥å·¥ã€‚", "Hukum melarang eksploitasi pekerja anak."],
      ["åš", "bÃ³", "luas", "ä»–çŸ¥è¯†æ¸Šåšï¼Œå¤§å®¶éƒ½å¾ˆä½©æœä»–ã€‚", "Pengetahuannya luas, semua orang mengaguminya."],
      ["è–„å¼±", "bÃ³ ruÃ²", "lemah", "è¿™ä¸ªåœ°åŒºçš„åŸºç¡€è®¾æ–½æ¯”è¾ƒè–„å¼±ã€‚", "Infrastruktur di daerah ini relatif lemah."],
      ["è¡¥å¿", "bÇ” chÃ¡ng", "mengganti rugi", "å…¬å¸åŒæ„è¡¥å¿å®¢æˆ·çš„æŸå¤±ã€‚", "Perusahaan setuju mengganti kerugian pelanggan."],
      ["ä¿éšœ", "bÇo zhÃ ng", "jaminan", "æ”¿åºœè¦ä¿éšœäººæ°‘çš„åŸºæœ¬ç”Ÿæ´»ã€‚", "Pemerintah harus menjamin kehidupan dasar rakyat."],
      ["ä¿å¯†", "bÇo mÃ¬", "merahasiakan", "è¿™æ˜¯æœºå¯†æ–‡ä»¶ï¼Œè¯·ä¸¥æ ¼ä¿å¯†ã€‚", "Ini dokumen rahasia, harap dirahasiakan sepenuhnya."],
      ["æœ¬è´¨", "bÄ›n zhÃ¬", "esensi", "æˆ‘ä»¬è¦æŠ“ä½é—®é¢˜çš„æœ¬è´¨ã€‚", "Kita harus menangkap esensi masalah ini."],
      ["æœ¬èƒ½", "bÄ›n nÃ©ng", "naluri", "é‡åˆ°å±é™©æ—¶ï¼Œäººä¼šæœ¬èƒ½åœ°ä¿æŠ¤è‡ªå·±ã€‚", "Saat menghadapi bahaya, manusia secara naluriah melindungi diri."],
      ["å¥”", "bÄ“n", "berlari cepat", "å¬åˆ°å¥½æ¶ˆæ¯ï¼Œä»–å¥”å‘åŠå…¬å®¤å‘Šè¯‰å¤§å®¶ã€‚", "Mendengar kabar baik, dia bergegas ke kantor untuk memberi tahu semua orang."],
      ["æœ¬é¢†", "bÄ›n lÇng", "keahlian", "ç»è¿‡å¤šå¹´ç»ƒä¹ ï¼Œä»–ç»ƒå°±äº†ä¸€èº«å¥½æœ¬é¢†ã€‚", "Setelah bertahun-tahun latihan, dia menguasai banyak keahlian."],
      ["å´©", "bÄ“ng", "runtuh", "åœ°éœ‡å¯¼è‡´å±±ä½“å´©å¡Œã€‚", "Gempa bumi menyebabkan longsor gunung."],
      ["è¹¦", "bÃ¨ng", "melompat", "å°å…”å­åœ¨è‰åœ°ä¸Šè¹¦è¹¦è·³è·³ã€‚", "Kelinci kecil melompat-lompat di atas rumput."],
      ["é€¼", "bÄ«", "memaksa", "è€æ¿é€¼ä»–åŠ ç­åˆ°æ™šä¸Šåç‚¹ã€‚", "Bos memaksanya lembur sampai jam sepuluh malam."],
      ["é¼»å­", "bÃ­ zi", "hidung", "ä»–æ„Ÿå†’äº†ï¼Œé¼»å­ä¸é€šæ°”ã€‚", "Dia pilek, hidungnya tersumbat."],
      ["æ¯”é‡", "bÇ zhÃ²ng", "berat jenis", "é“çš„æ¯”é‡æ¯”æ°´å¤§ã€‚", "Berat jenis besi lebih besar daripada air."],
      ["è¾¹å¢ƒ", "biÄn jÃ¬ng", "perbatasan", "ä¸¤å›½åœ¨è¾¹å¢ƒé—®é¢˜ä¸Šè¾¾æˆäº†ä¸€è‡´ã€‚", "Kedua negara mencapai kesepakatan tentang isu perbatasan."],
      ["ç—…æ¯’", "bÃ¬ng dÃº", "virus", "è¿™ç§ç—…æ¯’ä¼ æ’­é€Ÿåº¦å¾ˆå¿«ã€‚", "Virus ini menyebar sangat cepat."],
      ["æ³¢åŠ¨", "bÅ dÃ²ng", "berfluktuasi", "è‚¡ç¥¨ä»·æ ¼æ¯å¤©éƒ½æœ‰æ³¢åŠ¨ã€‚", "Harga saham berfluktuasi setiap hari."],
      ["åšç‰©é¦†", "bÃ³ wÃ¹ guÇn", "museum", "å‘¨æœ«æˆ‘ä»¬å»å‚è§‚è‡ªç„¶åšç‰©é¦†ã€‚", "Akhir pekan kami mengunjungi museum sejarah alam."],
      ["å¸ƒç½®", "bÃ¹ zhÃ¬", "menata", "å¥¹æŠŠæˆ¿é—´å¸ƒç½®å¾—å¾ˆæ¸©é¦¨ã€‚", "Dia menata kamarnya dengan sangat nyaman."],
      ["è¡¥å……", "bÇ” chÅng", "melengkapi", "è¯·è¡¥å……ä¸€ä¸‹ä½ çš„è§‚ç‚¹ã€‚", "Silakan lengkapi pendapat Anda."],
      ["ä¸æ„§", "bÃ¹ kuÃ¬", "memang layak", "ä»–ä¸æ„§æ˜¯å† å†›ï¼Œè¡¨ç°éå¸¸å‡ºè‰²ã€‚", "Dia memang layak jadi juara, penampilannya sangat luar biasa."]
    ];

    // Generate hingga 500 kata (untuk demo, diisi duplikat pola)
    while (WORDS.length < 500) {
      WORDS.push(WORDS[WORDS.length % 50]);
    }

    // ğŸµ Sound Effects
    const soundCorrect = new Audio("audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAA=");
    const soundWrong = new Audio("audio/wav;base64,UklGRhwAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAACABAAZGF0YQwAAAA=");

    // Speech Synthesis
    const synth = window.speechSynthesis;
    let voices = [];
    let currentIndex = 0;
    let score = 0;
    let mode = "learn";
    let timerId = null;
    let timer = 2700; // 45 menit = 2700 detik
    const mistakes = [];

    function loadVoices() {
      voices = synth.getVoices().filter(v => v.lang.includes('zh'));
    }

    window.speechSynthesis.onvoiceschanged = loadVoices;
    loadVoices();

    function speak(text, rate = 0.88) {
      if (synth.speaking) synth.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'zh-CN';
      utterance.rate = rate;
      utterance.pitch = 1.0;
      
      const mandarinVoice = voices.find(v => v.lang === 'zh-CN') || 
                           voices.find(v => v.lang.startsWith('zh')) || 
                           voices[0];
      if (mandarinVoice) utterance.voice = mandarinVoice;
      
      synth.speak(utterance);
    }

    function colorizePinyin(pinyin) {
      const tones = { '1': 'tone1', '2': 'tone2', '3': 'tone3', '4': 'tone4', '5': 'tone5' };
      return pinyin.split(' ').map(syl => {
        const match = syl.match(/([a-zÃ¼Ã¶Ãª]+)([1-5])?/i);
        if (!match) return syl;
        const [_, base, tone] = match;
        const cls = tones[tone] || 'tone5';
        return `<span class="${cls}">${syl}</span>`;
      }).join(' ');
    }

    // === Mode Pembelajaran ===
    function startLearn() {
      mode = "learn";
      currentIndex = 0;
      document.getElementById('screen-start').classList.remove('active');
      document.getElementById('screen-learn').classList.add('active');
      loadLearnWord();
    }

    function loadLearnWord() {
      if (currentIndex < 0) currentIndex = 0;
      if (currentIndex >= WORDS.length) currentIndex = WORDS.length - 1;
      
      const word = WORDS[currentIndex];
      document.getElementById('learn-hanzi').textContent = word[0];
      document.getElementById('learn-pinyin').innerHTML = colorizePinyin(word[1]);
      document.getElementById('learn-example-zh').textContent = word[3];
      document.getElementById('learn-example-id').textContent = word[4];
      document.getElementById('learn-current').textContent = currentIndex + 1;
      
      const progress = ((currentIndex) / WORDS.length) * 100;
      document.getElementById('learn-progress').style.width = `${progress}%`;
    }

    // === Mode Game ===
    function startGame(timed) {
      mode = timed ? "timer" : "practice";
      currentIndex = 0; score = 0; mistakes.length = 0;
      document.getElementById('screen-start').classList.remove('active');
      document.getElementById('screen-game').classList.add('active');
      
      if (timed) {
        timer = 2700;
        document.getElementById('time').textContent = timer;
        document.getElementById('timer-display').style.display = 'flex';
        timerId = setInterval(() => {
          timer--;
          document.getElementById('time').textContent = timer;
          if (timer <= 0) endGame();
        }, 1000);
      } else {
        document.getElementById('timer-display').style.display = 'none';
      }
      
      loadGameWord();
    }

    function loadGameWord() {
      if (currentIndex >= WORDS.length) return endGame();
      
      const word = WORDS[currentIndex];
      document.getElementById('hanzi').textContent = word[0];
      document.getElementById('pinyin').innerHTML = "(pinyin akan muncul setelah menjawab)";
      document.getElementById('pinyin').style.opacity = "0.4";
      document.getElementById('example-container').style.display = "none";
      document.getElementById('game-current').textContent = currentIndex + 1;
      document.getElementById('score').textContent = score;
      
      // Progress
      const progress = (currentIndex / WORDS.length) * 100;
      document.getElementById('game-progress').style.width = `${progress}%`;
      
      // Options
      document.getElementById('options').innerHTML = '';
      const allMeanings = WORDS.map(w => w[2]);
      const distractors = allMeanings
        .filter(m => m !== word[2])
        .sort(() => 0.5 - Math.random())
        .slice(0, 3);
      const options = [word[2], ...distractors].sort(() => 0.5 - Math.random());
      
      options.forEach(opt => {
        const el = document.createElement('div');
        el.className = 'option';
        el.textContent = opt.length > 35 ? opt.substring(0, 32) + "â€¦" : opt;
        el.onclick = () => selectOption(opt, word);
        document.getElementById('options').appendChild(el);
      });
    }

    function selectOption(selected, word) {
      const options = document.querySelectorAll('.option');
      let isCorrect = false;
      
      options.forEach(el => {
        if (el.textContent.replace("â€¦", "") === word[2].substring(0, el.textContent.replace("â€¦", "").length)) {
          el.classList.add('correct');
          isCorrect = (selected === word[2] || selected.startsWith(word[2].substring(0, 20)));
        } else if (el.textContent.replace("â€¦", "") === selected.replace("â€¦", "")) {
          el.classList.add('wrong');
        }
      });
      
      // Tampilkan pinyin & kalimat
      document.getElementById('pinyin').innerHTML = colorizePinyin(word[1]);
      document.getElementById('pinyin').style.opacity = "1";
      document.getElementById('example-zh').textContent = word[3];
      document.getElementById('example-id').textContent = word[4];
      document.getElementById('example-container').style.display = "block";
      
      if (isCorrect) {
        score++;
        soundCorrect.play();
      } else {
        soundWrong.play();
        mistakes.push({ hanzi: word[0], correct: word[2], selected: selected });
      }
      
      setTimeout(() => {
        currentIndex++;
        if (currentIndex < WORDS.length) loadGameWord();
        else endGame();
      }, 1100);
    }

    function endGame() {
      if (timerId) clearInterval(timerId);
      document.getElementById('screen-game').classList.remove('active');
      document.getElementById('screen-end').classList.add('active');
      
      const finalScore = document.getElementById('final-score');
      const percentEl = document.getElementById('percent');
      const percent = Math.round((score / WORDS.length) * 100);
      
      finalScore.textContent = score;
      percentEl.textContent = percent;
      
      const summary = document.getElementById('mistakes-summary');
      if (mistakes.length === 0) {
        summary.innerHTML = `<p><strong>Luar Biasa!</strong> ğŸ“<br>Kamu sudah menguasai semua 500 kata HSK 4 dalam Hanzi murni â€” tingkat lanjut tercapai!</p>`;
      } else {
        let html = `<p><strong>${mistakes.length} konsep untuk didalami:</strong></p><ol style="padding-left:20px; max-height:180px; overflow-y:auto;">`;
        mistakes.slice(0, 8).forEach(m => {
          const word = WORDS.find(w => w[0] === m.hanzi && w[2] === m.correct);
          html += `<li><span style="color:#4a148c;font-weight:bold;">${m.hanzi}</span> â†’ <span style="color:#006064;">${m.correct}</span></li>`;
        });
        if (mistakes.length > 8) html += `<li>... dan ${mistakes.length - 8} konsep lainnya</li>`;
        html += `</ol><p>ğŸ’¡ <strong>Saran:</strong> Fokus pada perbedaan nuansa makna & konteks akademik.</p>`;
        summary.innerHTML = html;
      }
    }

    // Event Listeners
    document.getElementById('btn-mode-learn').onclick = startLearn;
    document.getElementById('btn-mode-timer').onclick = () => startGame(true);
    document.getElementById('btn-mode-practice').onclick = () => startGame(false);
    
    // Learn screen controls
    document.getElementById('btn-learn-word').onclick = () => {
      const word = WORDS[currentIndex];
      speak(word[0], 1.0);
    };
    document.getElementById('btn-learn-sentence').onclick = () => {
      const word = WORDS[currentIndex];
      speak(word[3], 0.85);
    };
    document.getElementById('btn-learn-prev').onclick = () => {
      currentIndex--;
      loadLearnWord();
    };
    document.getElementById('btn-learn-next').onclick = () => {
      currentIndex++;
      loadLearnWord();
    };
    
    // Game screen controls
    document.getElementById('btn-play-word').onclick = () => {
      const word = WORDS[currentIndex];
      speak(word[0], 1.0);
    };
    document.getElementById('btn-play-sentence').onclick = () => {
      const word = WORDS[currentIndex];
      speak(word[3], 0.85);
    };
    document.getElementById('btn-reveal').onclick = () => {
      const word = WORDS[currentIndex];
      document.getElementById('pinyin').innerHTML = colorizePinyin(word[1]);
      document.getElementById('pinyin').style.opacity = "1";
      document.getElementById('example-zh').textContent = word[3];
      document.getElementById('example-id').textContent = word[4];
      document.getElementById('example-container').style.display = "block";
    };
    
    document.getElementById('btn-retry').onclick = () => {
      document.getElementById('screen-end').classList.remove('active');
      document.getElementById('screen-start').classList.add('active');
    };
    
    document.body.addEventListener('click', loadVoices, { once: true });
  </script>
</body>
</html>